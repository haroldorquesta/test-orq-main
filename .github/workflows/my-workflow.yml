name: Test Workflow Inputs

on:
  workflow_dispatch:
    inputs:
      environment:
        required: true
        type: string
        description: 'Environment name (e.g., staging, production)'
      tags:
        required: true
        type: choice
        options:
          - '@staging'
          - '@production'
          - '@admin'
        description: 'Cucumber tags to run (e.g., @staging, @production)'
      slack_environment:
        required: true
        type: choice
        options:
          - Staging
          - Production
        description: 'Environment name for Slack notifications'
      feature_path:
        required: false
        type: string
        description: 'Feature path to run (e.g. apps/orquesta-e2e/features/**/*.feature)'
    secrets:
      secret1:
        description: 'my env'
        required: true

jobs:
  test-inputs:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Display all inputs
        run: |
          echo "================================"
          echo "🎯 Workflow Inputs Test Results"
          echo "================================"
          echo ""
          echo "👤 User Name: ${{ inputs.user_name }}"
          echo "💬 Message: ${{ inputs.message }}"
          echo "🌍 Environment: ${{ inputs.environment }}"
          echo "🐛 Debug Mode: ${{ inputs.enable_debug }}"
          echo "📦 Version: ${{ inputs.version }}"
          echo ""
          echo "================================"
      
      - name: Conditional step based on debug input
        if: inputs.enable_debug == true
        run: |
          echo "🐛 Debug mode is ENABLED!"
          echo "Additional debug information would go here..."
      
      - name: Environment-specific action
        run: |
          case "${{ inputs.environment }}" in
            "production")
              echo "🚀 Running in PRODUCTION mode - be careful!"
              ;;
            "staging")
              echo "🧪 Running in STAGING mode"
              ;;
            "development")
              echo "🔧 Running in DEVELOPMENT mode"
              ;;
          esac
      
      - name: Create summary
        run: |
          echo "## 🎉 Workflow Execution Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| Input | Value |" >> $GITHUB_STEP_SUMMARY
          echo "|-------|-------|" >> $GITHUB_STEP_SUMMARY
          echo "| User Name | ${{ inputs.user_name }} |" >> $GITHUB_STEP_SUMMARY
          echo "| Message | ${{ inputs.message }} |" >> $GITHUB_STEP_SUMMARY
          echo "| Environment | ${{ inputs.environment }} |" >> $GITHUB_STEP_SUMMARY
          echo "| Debug Mode | ${{ inputs.enable_debug }} |" >> $GITHUB_STEP_SUMMARY
          echo "| Version | ${{ inputs.version }} |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "✅ All inputs processed successfully!" >> $GITHUB_STEP_SUMMARY